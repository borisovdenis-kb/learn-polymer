<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-slider/paper-slider.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="/src/polymer-first-app/my-button.html">
<link rel="import" href="/src/polymer-first-app/dialog-window.html">

<dom-module id="polymer-first-app">
  <template>
    <style>
      :host {
        display: block;
        font-family: sans-serif;
      }
      #form-wrapper {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        width: 100%;
      }
      #username-inputs {
        display: flex;
        flex-direction: row;
        background-color: rgba(236, 236, 223, 0.62);
      }
      #user-data-form {
        width: 50%;
      }
      paper-input {
        padding-left: 10px;
        padding-right: 10px;
      }
      paper-listbox {
        --paper-listbox-background-color: rgba(236, 236, 223, 0.62);
      }
      #slider-wrapper {
        background-color: rgba(236, 236, 223, 0.62);;
      }
      paper-slider {
        width: 100%;
      }
      paper-item {
        cursor: pointer;
      }
      .indent {
        margin-bottom: 15px;
      }
    </style>
    <div id="form-wrapper">
      <div id="user-data-form">
        <div id="username" class="indent">
          <span>ФИО:</span>
          <div id="username-inputs">
            <paper-input label="Фамилия" value="{{user.lastName}}"></paper-input>
            <paper-input label="Имя" value="{{user.firstName}}"></paper-input>
            <paper-input label="Отчество" value="{{user.middleName}}"></paper-input>
          </div>
        </div>

        <div id="user-age" class="indent">
          <span>Возраст:</span>
          <div id="slider-wrapper">
            <paper-slider pin value="{{user.age}}" max="100"></paper-slider>
          </div>
        </div>

        <div id="user-gender" class="indent">
          <span>Пол:</span>
          <paper-listbox attr-for-selected="item-name" selected="{{user.gender}}" fallback-selection="None">
            <paper-item item-name="Mужской">Мужской</paper-item>
            <paper-item item-name="Женский">Женский</paper-item>
          </paper-listbox>
        </div>

        <my-button on-tap="open"></my-button>
        <dialog-window id="modal" user="{{user}}" full-name="{{fullName}}">
        </dialog-window>
      </div>
    </div>

  </template>

  <script>
    class PolymerFirstApp extends Polymer.Element {
      static get is() { return 'polymer-first-app'; }
      static get properties() {
        return {
          user: {
            type: Object,
            value: f => {
              return {
                firstName: "",
                lastName: "",
                middleName: "",
                gender: undefined,
                age: 0
              }
            }
          },
          fullName: {
            type: String,
            computed: 'computeFullName(user.lastName, user.firstName, user.middleName)'
          }
        };
      }

      computeFullName(lastName, firstName, middleName) {
        return `${lastName} ${firstName} ${middleName}`
      }

      open() {
        this.$.modal.open()
      }
    }

    window.customElements.define(PolymerFirstApp.is, PolymerFirstApp);
  </script>
</dom-module>
